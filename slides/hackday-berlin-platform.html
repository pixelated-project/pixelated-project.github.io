<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

<img src="img/pixelated-hackday-Berlin.png" height="75%" width="75%" align="top" />
# LEAP Platform Workshop

slides are available at:

https://pixelated-project.org/slides/hackday-berlin-platform.html

---

# Requirements

- One Debian stable box, virtualized or bare metal
- Remote or local (vagrant or other solutions)
- 1GB ram, 15gb diskspace
- able to login via ssh as root

## Caching

- Use local caching proxy: `http://10.92.21.140:8000`

## Documentation Links

- [How to setup vagrant for LEAP](https://leap.se/en/docs/platform/development)
- [Single node email tutorial](https://leap.se/en/docs/platform/tutorials/single-node-email)

---

# Introduction

???

- who are we
- thoughtworks / pixelated / leap

---

# Overview

- Install LEAP mail provider from scatch        90 mins
- try pixelated-useragent against new provider
- Troubleshooting / Questions
- Hacking !1!

---

# Install LEAP Overview

- Get server ready
- Decide where to store the configuration (local laptop or on server itself)
- install [leap_platform](https://leap.se/en/docs/platform/tutorials/single-node-email#Check.out.the.platform) and and the command line tool [leap_cli](https://leap.se/en/docs/platform/tutorials/single-node-email#Install.the.LEAP.command-line.utility)
- configure provider configuration using leap_cli
- deploy configuratiom to server using leap_cli

???

- leap deploy takes ~30 mins, we'll use this time to explain more about the platform

---

# Get box ready

## Caching

Use local caching proxy: `http://10.92.21.140:8000`

## Vagrant Config

- Install [vagrant-proxyconf](https://github.com/tmatilai/vagrant-proxyconf) plugin

```bash
vagrant plugin install vagrant-proxyconf
```

Add this to your Vagrantfile

```ruby
config.apt_proxy.http  = "http://10.92.21.140:8000"
```

You need to reload/provision your vagrant box after adding this!

???

- leap deploy will download a lot of debian packages
- gems as well (but uses https)

# ssh


You should be able to login like this:

```
ssh root@1.2.3.4
```

---

# Lets's go

We'll follow the [LEAP Single node email tutorial](https://leap.se/en/docs/platform/tutorials/single-node-email)

???

- Open tutorial in browser and continue until "leap deploy"

---

# Waiting...

![Default-aligned image](img/compiling.png)

---

# More about the Platform

leap inspect:

```bash
leap inspect provider.json
leap inspect files/ca/ca.crt
```


---

# Setup DNS / local resolver

Only needed if you want to access the platform from your local laptop:

Add this to /etc/hosts:
```bash
x.x.x.w node1.example.org example.org api.example.org nicknym.example.org
```

---

# Links

https://pixelated-project.org/
https://leap.se

made with remark, a simple, in-browser, markdown-driven slideshow tool: https://github.com/gnab/remark



    </textarea>
    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
